<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <title>Lista de Cadastros</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .error { background:#ffe6e6; color:#b00000; padding:12px; border-radius:6px; margin-bottom:12px; }
        .info { background:#eef7ff; color:#045a9c; padding:8px 12px; border-radius:6px; }
        table { width: 100%; border-collapse: collapse; margin-top: 12px; }
        th, td { border: 1px solid #ddd; padding: 8px; text-align: left; vertical-align: middle; }
        th { background-color: #f4f4f4; }
        a { color: #007bff; text-decoration: none; }
        a:hover { text-decoration: underline; }
        .small { font-size: 13px; color: #666; }
    </style>
</head>
<body>
    <h2>üìã Lista de Cadastros</h2>

    {% if error %}
        <div class="error">Erro ao carregar a lista: {{ error }}</div>
    {% endif %}

    <div class="info small">
        Total de cadastros: {{ cadastros|length }} ‚Äî 
        <a href="/baixar-csv">‚¨áÔ∏è Baixar CSV</a>
    </div>

    <table>
        <thead>
            <tr>
                <th>Data</th>
                <th>Nome</th>
                <th>CPF</th>
                <th>Institui√ß√£o</th>
                <th>E-mail</th>
                <th>Telefone</th>
                <th>Arquivo</th>
            </tr>
        </thead>
        <tbody>
            {% for cadastro in cadastros %}
            <tr>
                <td>{{ cadastro.get("Data","") }}</td>
                <td>{{ cadastro.get("Nome","") }}</td>
                <td>{{ cadastro.get("CPF","") }}</td>
                <td>{{ cadastro.get("Institui√ß√£o","") }}</td>
                <td>{{ cadastro.get("E-mail","") }}</td>
                <td>{{ cadastro.get("Telefone","") }}</td>
                <td>
                    {% if cadastro.get("Arquivo") %}
                        <a href="/uploads/{{ cadastro.get('Arquivo') }}" target="_blank">üìé Baixar</a>
                    {% else %}
                        <span class="small">Nenhum</span>
                    {% endif %}
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</body>
</html>
